<div class="landing">
  <!-- HERO + BOOKING BAR -->
  <section class="landing-hero">
    <div class="bg" aria-hidden="true"></div>
    <div class="container">
      <div class="landing-hero-content">
        <h1>Find your next getaway</h1>
        <p>Compare flights, discover destinations, and book with confidence.</p>
        <form
          class="booking-bar"
          role="search"
          aria-label="Flight search"
          action="/book"
          method="POST"
        >
          <div class="booking-row">
            {{#with form}}
              <div class="field">
                <label class="k" for="fromCode">From</label>
                <select class="v" id="fromCode" name="fromCode" required>
                  <option value="" disabled selected>Select departure</option>
                  {{#if airportsByCountry}}
                    {{#each airportsByCountry}}
                      <optgroup label="{{country}}">
                        {{#each airports}}
                          <option value="{{code}}">{{city}} ({{code}})</option>
                        {{/each}}
                      </optgroup>
                    {{/each}}
                  {{else}}
                    {{#each airports}}
                      <option value="{{code}}">{{city}} ({{code}})</option>
                    {{/each}}
                  {{/if}}
                </select>
              </div>
              <div class="field">
                <label class="k" for="toCode">To</label>
                <select class="v" id="toCode" name="toCode" required>
                  <option value="" disabled selected>Select destination</option>
                  {{#if airportsByCountry}}
                    {{#each airportsByCountry}}
                      <optgroup label="{{country}}">
                        {{#each airports}}
                          <option value="{{code}}">{{city}} ({{code}})</option>
                        {{/each}}
                      </optgroup>
                    {{/each}}
                  {{else}}
                    {{#each airports}}
                      <option value="{{code}}">{{city}} ({{code}})</option>
                    {{/each}}
                  {{/if}}
                </select>
              </div>
              <div class="field">
                <label class="k" for="dpa">Depart</label>
                <input
                  class="v datepicker"
                  id="dpa"
                  name="dpa"
                  data-start="{{today}}"
                  placeholder="yyyy-mm-dd"
                  autocomplete="off"
                />
              </div>
              <div class="field">
                <label class="k" for="dpb">Return</label>
                <input
                  class="v datepicker"
                  id="dpb"
                  name="dpb"
                  data-start="{{today}}"
                  placeholder="yyyy-mm-dd"
                  autocomplete="off"
                />
              </div>
              <div class="field">
                <label class="k" for="passengers">Passengers</label>
                <select class="v" id="passengers" name="passengers">
                  {{#each passengers}}
                    <option>{{this}}</option>
                  {{/each}}
                </select>
              </div>
            {{/with}}
            <button class="cta" type="submit">Search flights</button>
          </div>
        </form>
        <div class="hero-actions">
          <div class="trending" aria-label="Trending">
            <a href="/book" class="chip">Summer deals</a>
            <a href="/book" class="chip">City breaks</a>
            <a href="/book" class="chip">Beach trips</a>
            <a href="/book" class="chip">Last-minute</a>
          </div>
          <button
            class="assistant"
            onclick="document.getElementById('ca-chat-launcher')?.click()"
          >âœ¨ Ask the AI travel assistant</button>
        </div>
      </div>
    </div>
  </section>

  <!-- POPULAR DESTINATIONS -->
  <section class="landing-section">
    <div class="container">
      <header class="section-header">
        <h2>Popular right now</h2>
        <p>Handpicked cities with great weather and better prices.</p>
      </header>
      <div class="grid grid-3">
        {{#each deals.destinations}}
          <article class="dest-card">
            <a
              href="/book"
              class="media"
              style="background-image:url('/assets/cities/{{desktop-image}}')"
            >
              <h3>{{title}}</h3>
            </a>
          </article>
        {{/each}}
      </div>
    </div>
  </section>

  <!-- PROMOS + ASSISTANT CALLOUT -->
  <section class="landing-section promos">
    <div class="container">
      <div class="grid grid-3 grid-collage">
        <a
          class="promo"
          href="/book"
          style="background-image:url('/assets/b-europe.jpg')"
        >
          <div class="copy"><h3>City escapes</h3><p>Weekends in Europe</p></div>
        </a>
        <a
          class="promo"
          href="/book"
          style="background-image:url('/assets/b-beaches.jpg')"
        >
          <div class="copy"><h3>Beach getaways</h3><p>Sun, sand, relax</p></div>
        </a>
        <div class="assistant-card">
          <h3>Plan smarter with our AI travel assistant</h3>
          <p>Ask about destinations, deals, and tips. It's like having a travel
            pro on call.</p>
          <button
            class="assistant-btn"
            onclick="document.getElementById('ca-chat-launcher')?.click()"
          >Chat now</button>
        </div>
      </div>
    </div>
  </section>
</div>